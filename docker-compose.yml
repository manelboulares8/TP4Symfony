version: "3.8"

services:
    php:
        image: php:8.3-fpm
        container_name: symfony-docker-php
        working_dir: /app
        volumes:
            - .:/app
        networks:
            - symfony-network

    database:
        image: mysql:5.7
        container_name: symfony-docker-database
        environment:
            MYSQL_ROOT_PASSWORD: root
            MYSQL_DATABASE: symfony
            MYSQL_USER: root
            MYSQL_PASSWORD: root
        ports:
            - 3306:3306
        networks:
            - symfony-network

    nginx:
        image: nginx:latest
        container_name: symfony-docker-nginx
        volumes:
            - .:/app
            - ./nginx/default.conf:/etc/nginx/conf.d/default.conf
        ports:
            - 80:80
        networks:
            - symfony-network
        depends_on:
            - php

networks:
    symfony-network:
        driver: bridge
phpmyadmin:
    image: phpmyadmin/phpmyadmin
    container_name: symfony-docker-phpmyadmin
    ports:
        - "8080:80"
    environment:
        - PMA_HOST=symfony-docker-database
        - PMA_PORT=5432
    depends_on:
        - symfony-docker-database
